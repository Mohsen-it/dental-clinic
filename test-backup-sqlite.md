# اختبار النسخ الاحتياطية SQLite

## التغييرات المطبقة

### 1. خدمة النسخ الاحتياطية (BackupService)
- ✅ تم تعديل `createBackup()` لإنشاء ملفات `.db` فقط
- ✅ تم تعديل `restoreBackup()` لاستعادة ملفات `.db` مع دعم JSON القديم
- ✅ تم تعديل `listBackups()` لعرض معلومات النسخ الجديدة
- ✅ تم تعديل `deleteBackup()` لحذف ملفات `.db`
- ✅ تم حذف الدوال المتعلقة بـ JSON والترخيص

### 2. واجهة المستخدم (Settings.tsx)
- ✅ تم تعديل النصوص لتشير إلى SQLite بدلاً من JSON
- ✅ تم إضافة مؤشرات لنوع النسخة الاحتياطية (SQLite/قديم)
- ✅ تم تحديث رسائل التنبيه

### 3. متجر النسخ الاحتياطية (backupStore.ts)
- ✅ تم تعديل `selectBackupFile()` لدعم ملفات `.db` و `.sqlite`

### 4. Electron Main Process
- ✅ تم تعديل حوار حفظ النسخ الاحتياطية لدعم `.db`
- ✅ تم تحديث فلاتر الملفات

## الميزات الجديدة

### إنشاء النسخ الاحتياطية
- النسخ الاحتياطية الآن تُحفظ بصيغة `.db` (SQLite)
- نسخ مباشر من ملف قاعدة البيانات الأصلي
- حجم أصغر وأداء أفضل

### استعادة النسخ الاحتياطية
- استعادة مباشرة من ملفات `.db`
- دعم للنسخ القديمة بصيغة JSON للتوافق
- إنشاء نسخة احتياطية من قاعدة البيانات الحالية قبل الاستعادة

### عرض النسخ الاحتياطية
- مؤشرات بصرية لنوع النسخة (SQLite/قديم)
- عرض معلومات مفصلة عن كل نسخة
- فلترة النسخ غير الموجودة تلقائياً

## التوافق مع النسخ القديمة
- النظام يدعم استعادة النسخ القديمة بصيغة JSON
- النسخ الجديدة تُحفظ بصيغة SQLite فقط
- لا يتم إنشاء ملفات JSON جديدة

## الاختبارات المطلوبة

### 1. إنشاء نسخة احتياطية جديدة
- [ ] التحقق من إنشاء ملف `.db`
- [ ] التحقق من حجم الملف
- [ ] التحقق من إضافة النسخة للقائمة

### 2. استعادة نسخة احتياطية SQLite
- [ ] التحقق من استعادة البيانات بشكل صحيح
- [ ] التحقق من إنشاء نسخة احتياطية من البيانات الحالية
- [ ] التحقق من تنظيف الملفات المؤقتة

### 3. استعادة نسخة احتياطية JSON قديمة
- [ ] التحقق من دعم النسخ القديمة
- [ ] التحقق من استعادة البيانات بشكل صحيح

### 4. عرض قائمة النسخ الاحتياطية
- [ ] التحقق من عرض النسخ الجديدة والقديمة
- [ ] التحقق من المؤشرات البصرية
- [ ] التحقق من معلومات الحجم والتاريخ

### 5. حذف النسخ الاحتياطية
- [ ] التحقق من حذف ملفات `.db`
- [ ] التحقق من إزالة النسخة من القائمة

## ملاحظات مهمة
- تم إزالة دعم إنشاء ملفات JSON جديدة نهائياً
- النظام يحتفظ بدعم قراءة JSON للتوافق مع النسخ القديمة
- جميع النسخ الجديدة ستكون بصيغة SQLite فقط
